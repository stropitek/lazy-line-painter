(function(t,e,a){var r="lazyLinePainter";var o={init:function(e){return this.each(function(){var a=t(this),i=a.data(r);a.addClass("lazy-line");if(!i){var o=t.extend({width:null,height:null,strokeWidth:2,strokeColor:"#000",strokeCap:"round",strokeJoin:"round",strokeOpacity:1,strokeDash:null,onComplete:null,delay:null,overrideKey:null},e);var n=o.overrideKey===null?a.attr("id").replace("#",""):o.overrideKey;var s=o.svgData[n].dimensions.width,l=o.svgData[n].dimensions.height;o.svgData=o.svgData[n].strokepath;if(o.width===null)o.width=s;if(o.height===null)o.height=l;var h=a.attr("id");var d=new Raphael(h,s,l);a.data(r,{svgData:o.svgData,width:o.width,height:o.height,strokeWidth:o.strokeWidth,strokeColor:o.strokeColor,strokeCap:o.strokeCap,strokeJoin:o.strokeJoin,strokeOpacity:o.strokeOpacity,strokeDash:o.strokeDash,onComplete:o.onComplete,delay:o.delay,overrideKey:o.overrideKey,paper:d,count:1,complete:false,playhead:0,setTimeOutHandler:[]})}})},paint:function(){return this.each(function(){var e=t(this),i=e.data(r);var o=function(){e.css({width:i.width,height:i.height});t.each(i.svgData,function(t,r){var o=i.paper.path(r.path);o.attr({stroke:"none","stroke-width":i.strokeWidth,"fill-opacity":0});var l=setTimeout(function(){var t=s({count:i.count,canvas:i.paper,pathstr:o,duration:r.duration,attr:n(i,r),callback:function(t){i.setTimeOutHandler.splice(i.count,1);i.count++;if(i.svgData.length+1==i.count){i.complete=true;if(i.onComplete!==null)i.onComplete.call(e)}}})},r.start===a?i.playhead:r.start);console.log("start",r.start);i.playhead=Math.max(i.playhead+r.duration,(r.start||0)+r.duration);i.setTimeOutHandler.push(l)})};if(i.delay===null)o();else setTimeout(o,i.delay)})},erase:function(){return this.each(function(){var e=t(this);e.find("svg").empty();d=e.data(r);for(i=0;i<d.setTimeOutHandler.length;i++){clearTimeout(d.setTimeOutHandler[i])}d.playhead=0;d.count=0;d.complete=false})},destroy:function(){return this.each(function(){var e=t(this),a=e.data(r);e.removeData(r);e.remove()})},stamp:function(){return this.each(function(){var e=t(this),a=e.data(r);var o=function(){e.css({width:a.width,height:a.height});for(i=0;i<a.svgData.length;i++){a.paper.path(a.svgData[i].path).attr(n(a,a.svgData[i]))}};if(a.delay===null)o();else setTimeout(o,a.delay)})}};var n=function(t,e){var a={stroke:!e.strokeColor?t.strokeColor:e.strokeColor,"fill-opacity":0,"stroke-dasharray":!e.strokeDash?t.strokeDash:e.strokeDash,"stroke-opacity":!e.strokeOpacity?t.strokeOpacity:e.strokeOpacity,"stroke-width":!e.strokeWidth?t.strokeWidth:e.strokeWidth,"stroke-linecap":!e.strokeCap?t.strokeCap:e.strokeCap,"stroke-linejoin":!e.strokeJoin?t.strokeJoin:e.strokeJoin};return a};var s=function(t){var e=t.canvas,r=t.pathstr,i=t.duration,o=t.attr,n=t.callback;var s;if(typeof r=="string")s=e.path(r).attr({stroke:"none",fill:"none"});else s=r;var l=e.path(s.getSubpath(0,1)).attr(o),h=s.getTotalLength(s),d=s.getPointAtLength(0),u=(new Date).getTime(),p=25;var c=setInterval(function(){var t=(new Date).getTime()-u,e=t/i*h,r=s.getSubpath(0,e);o.path=r;l.animate(o,p);if(t>=i){clearInterval(c);if(n!==a)n();s.remove()}},p)};t.fn.lazylinepainter=function(t){if(o[t]){return o[t].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof t==="object"||!t){return o.init.apply(this,arguments)}else{}}})(jQuery,window);